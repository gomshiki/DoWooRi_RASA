version: "2.0"

rules:
  - rule: Greet user
    steps:
      - intent: greet
      - action: utter_greet

  # 연차&휴직
  - rule: activate dayoff_rest form
    steps:
      - intent: request_dayoff_rest
      - action: utter_docuType
      - action: dayoff_rest_form
      - active_loop: dayoff_rest_form

  # 반차&사직
  - rule: activate halfoff_resign form
    steps:
      - intent: request_halfoff_resign
      - action: utter_docuType
      - action: halfoff_resign_form
      - active_loop: halfoff_resign_form

   # 연차&휴직
  - rule : submit dayoff_rest form
    condition:
    - active_loop: dayoff_rest_form
    steps:
      - action: dayoff_rest_form
      - active_loop: null
      - action: utter_success
      - action: utter_slots_values
      - action: submit_form

  # 반차&사직
  - rule : submit halff form
    condition:
    - active_loop: halfoff_resign_form
    steps:
      - action: halfoff_resign_form
      - active_loop: null
      - action: utter_success
      - action: utter_slots_values
      - action: submit_form

  - rule: thank
    steps:
      - intent: thank
      - action: utter_bye

  # 잘못 입력받았을때 대응
  - rule: default
    steps:
      - intent: nlu_fallback
      - action: utter_default